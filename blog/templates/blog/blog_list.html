{% extends "layout.html" %}
{% block title %}Blog — {{ owner_name|default:"Aditya Singh" }}{% endblock %}
{% block content %}
<section class="max-w-5xl mx-auto grid gap-6">
  <div class="flex items-center justify-between">
    <h1 class="text-2xl font-semibold">Blog</h1>

    <form method="get" class="flex items-center gap-2">
      <input type="search" name="q" value="{{ request.GET.q }}" placeholder="Search posts" class="px-3 py-2 rounded-lg border bg-white dark:bg-slate-800 text-sm">
      <button class="px-3 py-2 rounded-lg border text-sm">Search</button>
    </form>
  </div>

  <div class="flex gap-4">
    <!-- categories -->
    <aside class="w-1/4 hidden md:block">
      <div class="p-4 rounded-lg bg-white dark:bg-slate-800">
        <h3 class="font-semibold">Categories</h3>
        <ul class="mt-3 space-y-2">
          {% for category in categories %}
            <li><a href="?category={{ category.slug }}" class="text-sm hover:underline">{{ category.name }} ({{ category.post_count }})</a></li>
          {% endfor %}
        </ul>
      </div>
    </aside>

    <!-- posts -->
    <div class="flex-1 grid gap-4">
      {% for post in posts %}
      <article class="rounded-xl p-4 bg-white dark:bg-slate-800 shadow-sm">
        <div class="md:flex md:items-start md:gap-4">
          {% if post.featured_image %}
            <img src="{{ post.featured_image.url }}" alt="{{ post.title }}" class="w-40 h-28 object-cover rounded-lg md:shrink-0">
          {% endif %}
          <div>
            <h2 class="font-semibold text-lg"><a href="{% url 'blog_detail' post.slug %}" class="hover:underline">{{ post.title }}</a></h2>
            <p class="text-xs text-slate-500 mt-1">{{ post.published_date|date:"F j, Y" }} • {{ post.read_time|default:"4 min read" }}</p>
            <p class="mt-2 text-sm text-slate-600 dark:text-slate-400">{{ post.excerpt }}</p>
            <div class="mt-3 flex gap-2">
              {% for tag in post.tags.all %}
                <span class="text-xs px-2 py-1 rounded-full border">{{ tag.name }}</span>
              {% endfor %}
            </div>
          </div>
        </div>
      </article>
      {% empty %}
        <p class="text-slate-500">No posts found.</p>
      {% endfor %}

      <!-- pagination -->
      <div class="mt-4">
        {% if is_paginated %}
          <div class="flex items-center gap-2">
            {% if page_obj.has_previous %}
              <a href="?page={{ page_obj.previous_page_number }}" class="px-3 py-1 rounded border">Prev</a>
            {% endif %}
            <span class="text-sm">Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span>
            {% if page_obj.has_next %}
              <a href="?page={{ page_obj.next_page_number }}" class="px-3 py-1 rounded border">Next</a>
            {% endif %}
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</section>
{% endblock %}

{% comment %} {% extends "layout.html" %}
{% block content %}
<h1>Blog list here</h1>
{% endblock %} {% endcomment %}